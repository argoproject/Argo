!function(){var a=jQuery,b=function(){return this.scrollTop=a(window).scrollTop(),this.previousScroll=null,this.initialLoad=!0,this.init()};b.prototype.init=function(){return this.enableMobileDropdowns(),this.stickyNavEl=a(".sticky-nav-holder"),this.mainEl=a("#main"),this.mainNavEl=a("#main-nav"),this.bindEvents(),setTimeout(this.navOverflow.bind(this),0),this.responsiveNavigation(),this},b.prototype.enableMobileDropdowns=function(){if(Modernizr.touch){var b=/Mobile\/.+Safari/.test(navigator.userAgent)?"touchstart":"click",c=!1;a("ul.nav").on(b+".largo","li",function(b){var e=a(b.currentTarget);return e.hasClass("dropdown")?void(e.is(".open")?a(b.target).is("b.caret")&&(e.removeClass("open"),c=!1,b.preventDefault(),b.stopPropagation()):(d(),e.addClass("open"),c=e,b.preventDefault(),b.stopPropagation())):(window.location.href=e.find("a").attr("href"),b.preventDefault(),b.stopPropagation(),!1)});var d=function(){c&&(c.removeClass("open"),c=!1)};a("body").on(b,d)}},b.prototype.bindEvents=function(){a(window).resize(this.navOverflow.bind(this)),this.bindStickyNavEvents()},b.prototype.bindStickyNavEvents=function(){var b=this;a.each(Largo.sticky_nav_options,function(a,c){c&&b.stickyNavEl.addClass(a)}),a(window).on("scroll",this.stickyNavScrollCallback.bind(this)),a(window).on("resize",this.stickyNavResizeCallback.bind(this)),this.stickyNavResizeCallback(),this.stickyNavSetOffset()},b.prototype.stickyNavResizeCallback=function(){(a(window).width()<=768||Largo.sticky_nav_options.main_nav_hide_article)&&(this.stickyNavEl.addClass("show"),this.stickyNavEl.parent().css("height",this.stickyNavEl.outerHeight())),this.stickyNavSetOffset()},b.prototype.stickyNavScrollCallback=function(b){var c,d,e=this.scrollDirection();return a(window).scrollTop()<=this.mainEl.offset().top&&this.mainNavEl.is(":visible")?(this.stickyNavEl.removeClass("show"),void clearTimeout(this.scrollTimeout)):(this.stickyNavSetOffset(),void(this.previousScroll!=e&&(clearTimeout(this.scrollTimeout),"up"==e?(c=this.stickyNavEl.addClass.bind(this.stickyNavEl,"show"),d=250):"down"==e&&(c=this.stickyNavEl.removeClass.bind(this.stickyNavEl,"show"),d=500),this.scrollTimeout=setTimeout(c,d),this.previousScroll=e)))},b.prototype.scrollDirection=function(){var b,c=a(window).scrollTop();return b=c>this.scrollTop?"down":"up",this.scrollTop=c,b},b.prototype.stickyNavSetOffset=function(){a("body").hasClass("admin-bar")&&a(window).width()<=600&&(a(window).scrollTop()<=a("#wpadminbar").outerHeight()?this.stickyNavEl.css("top",a("#wpadminbar").outerHeight()):this.stickyNavEl.css("top",""))},b.prototype.responsiveNavigation=function(){a(".navbar .toggle-nav-bar").each(function(){var b=a(this),c=b.closest(".navbar");b.on("touchstart.toggleNav",function(){b.off("click.toggleNav"),c.toggleClass("open"),c.hasClass("open")||c.find(".nav-shelf li.open").removeClass("open")}),b.on("click.toggleNav",function(){c.toggleClass("open")}),c.on("touchstart.toggleNav click.toggleNav",".nav-shelf .caret",function(d){if("none"!=b.css("display")){"touchstart"==d.type&&c.off("click.toggleNav",".nav-shelf .dropdown-toggle");var e=a(d.target).closest("li");e.hasClass("open")||c.find(".nav-shelf li.open").removeClass("open"),e.toggleClass("open"),d.preventDefault()}})})},b.prototype.navOverflow=function(){var b=a("#sticky-nav");if(b.is(":visible")){"undefined"!=typeof this.navOverflowTimeout&&clearTimeout(this.navOverflowTimeout),"hidden"==!b.parent().css("overflow")&&b.parent().css({height:b.outerHeight(),overflow:"hidden"});var c=b.find(".nav-shelf"),d=b.find(".toggle-nav-bar"),e=b.find(".nav-right"),f=c.outerWidth(),g=e.outerWidth(),h=b.find(".caret").first().outerWidth(),i=(a(window).width(),d.is(":visible"));if(!i){var j=0;c.find("ul.nav > li").each(function(){a(this).is(":visible")&&(j+=a(this).outerWidth())});var k=c.find("ul.nav > li#menu-overflow.menu-item-has-children").last();if(j>f-g-h){if(0==k.length){var l='<li id="menu-overflow" class="menu-item-has-children dropdown"><a class="dropdown-toggle">More<b class="caret"></b></a><ul id="menu-more-1" class="dropdown-menu"></ul></li>';k=a(l),c.find("ul.nav > li.menu-item").last().after(k)}var m=c.find("ul.nav > li.menu-item").last();k.find("ul#menu-more-1").prepend(m),m.addClass("overflowed"),m.data("shelfwidth",f)}else if(k.length){var m=k.find("li").first();m.hasClass("overflowed")&&m.data("shelfwidth")<f&&(c.find("ul.nav > li.menu-item").last().after(m),0==k.find("ul li").length&&k.remove())}}return b.outerHeight()!==c.find(".nav").outerHeight()?void(this.navOverflowTimeout=setTimeout(this.navOverflow.bind(this),0)):void b.parent().css({height:"",overflow:""})}},"undefined"==typeof window.Navigation&&(window.Navigation=b),a(document).ready(function(){window.test=new b})}();